<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="./main.css">

</head>

<body>

    <img src="https://files.porsche.com/filestore/galleryimagerwd/multimedia/none/971-g2-2nd-gallery-exterior-19/zoom2/a14163c6-be31-11eb-80d7-005056bbdc38;sH;twebp065/porsche-zoom2.webp"
        alt="" id="image">

    <div class="website-content" id="image-background-overlay">
        <div class="main-section">
            <h1 class="main-title"></h1>
        </div>
    </div>

    <script>
        // Récupération de l'élément image
        var image = document.getElementById("image");
        var overlay = document.getElementById("image-background-overlay");

        // Ajout des écouteurs d'événements pour la souris
        overlay.addEventListener("mousemove", changePerspective);
        overlay.addEventListener("mouseleave", resetPerspective);

        function changePerspective(event) {
            // Récupération des coordonnées de la souris
            var x = event.clientX;
            var y = event.clientY;

            // Calcul des transformations CSS en fonction des coordonnées de la souris
            var transformX = (x / window.innerWidth * 5) - 2.5;
            var transformY = (y / window.innerHeight * 5) - 2.5;

            // Applique les transformations CSS à l'image
            image.style.transform = "perspective(2000px) rotateX(" + transformY + "deg) rotateY(" + transformX + "deg)";
        }

        function resetPerspective() {
            // Remet l'image à sa position initiale lorsque la souris quitte l'image
            image.style.transform = "perspective(500px) rotateX(0deg) rotateY(0deg)";
            image.style.transition = "all ease 0.2s";
        }


    </script>

    <script>
        // Sélectionnez le titre
        var title = document.querySelector("h1");

        // Initialisez une variable pour suivre l'index de la prochaine lettre à ajouter
        var index = 0;
        textAfficher = "Porsche Panamera";

        // Utilisez setInterval pour créer une boucle d'animation
        boucle = setInterval(function () {

            // Ajoutez la prochaine lettre au titre
            title.innerHTML += textAfficher[index];

            // augmenter la transparence de la lettre courante pour créer un effet de fondu
            title.style.opacity = index / title.textContent.length;

            // Incrémenter l'index pour suivre la prochaine lettre à ajouter
            index++;

            console.log(index);

            // Arrêter la boucle d'animation après que toutes les lettres ont été ajoutées
            if (index > 15) {
                clearInterval(boucle);
            }
            
        }, 100);

        function displaymainTitle() {
            while(index <= 15) {
                index = 15;
            }
        }

        // displaymainTitle();

    </script>

</body>

</html>